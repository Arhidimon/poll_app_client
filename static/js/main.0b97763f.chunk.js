(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{207:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(60),o=n.n(i),r=(n(207),n(14)),c=n(15),l=n(21),d=n(20),h=n(23),u=n(29),j=n(25),p=n.n(j),b=n(61),g=n(24),x=n(35),O=n(1);var m=function(e){return function(t){var n=Object(g.f)(),a=Object(g.g)(),s=Object(g.h)();return Object(O.jsx)(e,Object(u.a)(Object(u.a)({},t),{},{router:{location:n,navigate:a,params:s}}))}},f=n(134),v=n(34),y=n(174),w=n(299),C=n(305),k=n(104),S=n(285),I=n(306),A=n(236),T=n(296),P=n(307),M=n(297),D=n(302),U=n(235),N=n(105),B=n(286),F=s.a.createContext({user:null,signin:function(){return null},signout:function(){return null}});v.f.register(v.a,v.e,v.j,v.c,v.o,v.p,v.h);var L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).id="",a.hasIncorrectId=!1,a.vote=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,s,i,o,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("vote"),console.log("context ".concat(a.context," ").concat(JSON.stringify(a.context))),n={"Content-Type":"application/json"},s=localStorage.getItem("user"),!a.context.user||!s){e.next=9;break}i=JSON.parse(s).access_token,n.Authorization="Bearer ".concat(i),e.next=10;break;case 9:return e.abrupt("return");case 10:return e.next=12,fetch("http://localhost:3000/api/polls/".concat(a.id,"/vote"),{method:"POST",headers:n,body:JSON.stringify({option:t})});case 12:if(!(o=e.sent).ok){e.next=20;break}return e.next=16,o.json();case 16:r=e.sent,a.setState({isLoaded:!0,poll:r}),e.next=21;break;case 20:a.setState({isLoaded:!0,error:"HTTP error: ".concat(o.status)});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.changeOption=function(e){console.log("changeOption"),a.context.user&&(a.vote(parseInt(e.target.value)),a.setState((function(t){return t.poll?{poll:Object(u.a)(Object(u.a)({},t.poll),{},{selected:parseInt(e.target.value)})}:{}})))},a.state={tabIndex:0,isLoaded:!1},console.log("props"),console.log(e),e.router.params.id?a.id=e.router.params.id:a.hasIncorrectId=!0,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,a,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n=localStorage.getItem("user"),console.log("context.user ".concat(this.context.user," user ").concat(n)),this.context.user&&n&&(a=JSON.parse(n).access_token,t.Authorization="Bearer ".concat(a)),console.log("headers ".concat(JSON.stringify(t))),e.next=7,fetch("http://localhost:3000/api/polls/".concat(this.id),{method:"GET",headers:t});case 7:if(!(s=e.sent).ok){e.next=15;break}return e.next=11,s.json();case 11:i=e.sent,this.setState({isLoaded:!0,poll:i}),e.next=16;break;case 15:this.setState({isLoaded:!0,error:"HTTP error: ".concat(s.status)});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"convertDataToDoughnutChart",value:function(e){for(var t={labels:[],datasets:[{label:"# of Votes",data:[],borderWidth:2}]},n=[],a=[],s=0;s<e.options.length;s++){var i="rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ");n.push(i+"0.2"),a.push(i+"1")}t.datasets[0].backgroundColor=n,t.datasets[0].borderColor=a;var o,r=Object(h.a)(e.options);try{for(r.s();!(o=r.n()).done;){var c,l=o.value;null===(c=t.labels)||void 0===c||c.push(l.name),t.datasets[0].data.push(l.numberOfVotes)}}catch(d){r.e(d)}finally{r.f()}return t}},{key:"convertDataToBarChart",value:function(e){for(var t={labels:[],datasets:[{label:"# of Votes",data:[],borderWidth:2}]},n=[],a=[],s=0;s<e.options.length;s++){var i="rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ");n.push(i+"0.2"),a.push(i+"1")}t.datasets[0].backgroundColor=n,t.datasets[0].borderColor=a;var o,r=Object(h.a)(e.options);try{for(r.s();!(o=r.n()).done;){var c,l=o.value;null===(c=t.labels)||void 0===c||c.push(l.name),t.datasets[0].data.push(l.numberOfVotes)}}catch(d){r.e(d)}finally{r.f()}return t}},{key:"render",value:function(){var e=this;if(this.hasIncorrectId)return Object(O.jsx)(g.a,{to:"/404"});return this.state.poll&&console.log("this.state.poll.selected ".concat(this.state.poll.selected)),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("main",{children:Object(O.jsx)("div",{className:"Poll",children:this.state.isLoaded&&this.state.poll?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:this.state.poll.name}),Object(O.jsxs)(y.a,{elevation:3,children:[Object(O.jsxs)(w.a,{"aria-label":"breadcrumb",children:[Object(O.jsx)(C.a,{underline:"hover",color:"inherit",to:"/polls",component:x.b,children:"Polls"}),Object(O.jsx)(k.a,{color:"text.primary",children:this.state.poll.name})]}),Object(O.jsx)(S.a,{variant:"middle"}),this.context.user&&Object(O.jsxs)(N.a,{component:"fieldset",children:[Object(O.jsx)(B.a,{component:"legend",children:this.state.poll.name}),Object(O.jsx)(I.a,{sx:{bgcolor:"background.paper",color:"text.primary",left:"0"},children:Object(O.jsx)(D.a,{"aria-label":"poll",name:"radio-buttons-group",value:null===this.state.poll.selected||void 0===this.state.poll.selected?void 0:this.state.poll.selected.toString(),onChange:this.changeOption,children:Object.values(this.state.poll.options).map((function(e,t){return Object(O.jsx)(U.a,{value:t,control:Object(O.jsx)(M.a,{}),label:e.name})}))})})]}),Object(O.jsxs)(T.a,{value:this.state.tabIndex,onChange:function(t,n){e.setState({tabIndex:n})},centered:!0,children:[Object(O.jsx)(P.a,{label:"Doughnut Chart"}),Object(O.jsx)(P.a,{label:"Bar Chart"})]}),0===this.state.tabIndex&&Object(O.jsx)(f.b,{data:this.convertDataToDoughnutChart(this.state.poll)}),1===this.state.tabIndex&&Object(O.jsx)(f.a,{data:this.convertDataToBarChart(this.state.poll)})]})]}):Object(O.jsx)(A.a,{})})})})}}]),n}(s.a.Component);L.contextType=F;var E=m(L),W=n(153),V=n.n(W),z=n(154),J=n.n(z),Y=n(81),G=n(156),H=n(116),R=n(155),_=n.n(R),q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onCopyUrlClick=function(e){return function(){navigator.clipboard.writeText(window.location+"/"+e),a.props.enqueueSnackbar("Poll link copied to buffer.",{variant:"success"})}},a.dataGridColumns=[{field:"action",headerName:"Action",sortable:!1,renderCell:function(e){return console.log(),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Y.a,{style:{minWidth:"0"},children:Object(O.jsx)(x.b,{to:"/polls/"+e.id,style:{textDecoration:"none"},children:Object(O.jsx)(V.a,{})})}),Object(O.jsx)(Y.a,{onClick:a.onCopyUrlClick(e.id),style:{minWidth:"0"},children:Object(O.jsx)(J.a,{})})]})}},{field:"name",headerName:"Caption",minWidth:200,flex:1},{field:"votes",headerName:"Users voted",width:150},{field:"poll_type",headerName:"Type",width:100},{field:"start",headerName:"Start date",width:100,hide:!0},{field:"end",headerName:"End date",width:100,hide:!0}],a.router=void 0,a.router=a.props.router,a.state={error:null,isLoaded:!1,polls:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/polls");case 2:if(!(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:n=e.sent,this.setState({isLoaded:!0,polls:n}),e.next=11;break;case 10:this.setState({isLoaded:!0,error:t.status});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCellClick",value:function(){console.log("clicked")}},{key:"render",value:function(){return Object(O.jsx)("main",{children:Object(O.jsxs)("div",{className:"Polls",children:[Object(O.jsx)(y.a,{elevation:3,children:Object(O.jsx)("h1",{children:"Polls:"})}),this.context.user&&Object(O.jsx)(x.b,{to:"/polls/new",style:{textDecoration:"none"},children:Object(O.jsx)(Y.a,{variant:"outlined",startIcon:Object(O.jsx)(_.a,{}),children:"New"})}),Object(O.jsx)(y.a,{elevation:3,children:Object(O.jsx)(G.a,{loading:!this.state.isLoaded,rows:this.state.polls,columns:this.dataGridColumns,autoHeight:!0,disableSelectionOnClick:!0,onCellClick:this.onCellClick})})]})})}}]),n}(s.a.Component);q.contextType=F;var $,K=Object(H.b)(m(q)),Q=n(3),X=n(132),Z=n.n(X),ee=n(161),te=n.n(ee),ne=n(162),ae=n.n(ne),se=n(103),ie=n.n(se),oe=n(158),re=n.n(oe),ce=n(160),le=n.n(ce),de=n(163),he=n.n(de),ue=n(133),je=n.n(ue),pe=n(131),be=n.n(pe),ge=n(159),xe=n.n(ge),Oe=n(166),me=n(57),fe=n(316),ve=n(137),ye=n(292),we=n(317),Ce=n(82),ke=n(37),Se=n(310),Ie=n(298),Ae=n(170),Te=n(293),Pe=n(4),Me=n(39),De=n(164),Ue=n.n(De),Ne=n(311),Be=n(319),Fe=n(136),Le=n(312),Ee=n(291),We=n(313),Ve=n(314),ze=n(315),Je=n(172);!function(e){e[e.SignIn=0]="SignIn",e[e.SignUp=1]="SignUp",e[e.Terms=2]="Terms"}($||($={}));var Ye=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).fields=void 0,a.validate=function(e,t){switch(e){case"email":a.fields.email.value=t,a.fields.email.isValid=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)*\w[\w-]{0,66}\.[a-z]{2,6}(?:\.[a-z]{2})?$/.test(t);break;case"password":a.fields.password.value=t,a.fields.password.isValid=t.length>0;break;case"login":a.fields.login.value=t,a.fields.login.isValid=t.length>0}a.setState(Object(u.a)({},a.fields)),console.log(a.fields)},a.onSignInClick=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.login.value,password:a.state.password.value})});case 2:if(!(t=e.sent).ok){e.next=14;break}return e.next=6,t.json();case 6:n=e.sent,console.log("SignIn"),console.log(n),a.context.signin({user:{login:a.state.login.value}}),localStorage.setItem("username",a.state.login.value),localStorage.setItem("user",JSON.stringify(n)),e.next=15;break;case 14:alert("SignIn error: "+t.status);case 15:a.props.onClose();case 16:case"end":return e.stop()}}),e)}))),a.onTermsDecline=function(){a.setState({mode:$.SignUp,isTermsAccepted:!1})},a.onTermsAccept=function(){a.setState({mode:$.SignUp,isTermsAccepted:!0})},a.onSignUpSubmit=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.login.value,password:a.state.password.value,email:a.state.email.value})});case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:n=e.sent,console.log("SignUp"),console.log(n),e.next=12;break;case 11:alert("SignUp error: "+t.status);case 12:a.props.onClose();case 13:case"end":return e.stop()}}),e)}))),a.state={mode:e.mode,email:{value:"",isValid:!1},login:{value:"",isValid:!1},password:{value:"",isValid:!1},isTermsAccepted:!1},a.fields={email:{value:"",isValid:!1},login:{value:"",isValid:!1},password:{value:"",isValid:!1}},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;switch(this.state.mode){case $.SignIn:var t=""!==this.state.login.value&&!this.state.login.isValid,n=""!==this.state.password.value&&!this.state.password.isValid;return Object(O.jsx)("div",{children:Object(O.jsxs)(Le.a,{open:!0,onClose:this.props.onClose,children:[Object(O.jsx)(Ee.a,{children:"Sign In"}),Object(O.jsxs)(We.a,{children:[Object(O.jsx)(Ve.a,{children:"By continuing, you agree to our User Agreement and Privacy Policy."}),Object(O.jsx)(Fe.a,{error:t,helperText:t?"Invalid login!":"",autoFocus:!0,margin:"dense",id:"login",label:"Login",type:"login",fullWidth:!0,variant:"outlined",onBlur:function(t){e.validate("login",t.target.value)}}),Object(O.jsx)(Fe.a,{error:n,helperText:n?"Invalid password!":"",margin:"dense",id:"password",label:"Password",type:"password",fullWidth:!0,variant:"outlined",onBlur:function(t){e.validate("password",t.target.value)}})]}),Object(O.jsxs)(ze.a,{children:[Object(O.jsx)(Y.a,{onClick:this.props.onClose,children:"Cancel"}),Object(O.jsx)(Y.a,{onClick:this.onSignInClick,children:"Sign in"})]})]})});case $.SignUp:var a=""!==this.state.email.value&&!this.state.email.isValid,s=""!==this.state.password.value&&!this.state.password.isValid,i=""!==this.state.login.value&&!this.state.login.isValid;return Object(O.jsx)("div",{children:Object(O.jsxs)(Le.a,{open:!0,onClose:this.props.onClose,children:[Object(O.jsx)(Ee.a,{children:"Sign Up"}),Object(O.jsxs)(We.a,{children:[Object(O.jsx)(Ve.a,{children:"By continuing, you are setting up a PollApp account and agree to our User Agreement and Privacy Policy."}),Object(O.jsx)(Fe.a,{autoFocus:!0,error:a,helperText:a?"Invalid email!":"",margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0,variant:"outlined",onBlur:function(t){e.validate("email",t.target.value)}}),Object(O.jsx)(Fe.a,{error:i,helperText:i?"Invalid login!":"",autoFocus:!0,margin:"dense",id:"login",label:"Login",type:"login",fullWidth:!0,variant:"outlined",onBlur:function(t){e.validate("login",t.target.value)}}),Object(O.jsx)(Fe.a,{margin:"dense",error:s,helperText:s?"Invalid password!":"",id:"password",label:"Password",type:"password",fullWidth:!0,variant:"outlined",onBlur:function(t){e.validate("password",t.target.value)}}),Object(O.jsx)(Je.a,{checked:this.state.isTermsAccepted,onChange:function(t){return e.setState({isTermsAccepted:t.target.checked})}})," ",Object(O.jsx)("span",{children:"I read and accepted"}),Object(O.jsx)(Y.a,{style:{textTransform:"none"},onClick:function(){return e.setState({mode:$.Terms})},children:"user agreement"}),"."]}),Object(O.jsxs)(ze.a,{children:[Object(O.jsx)(Y.a,{onClick:this.props.onClose,children:"Cancel"}),Object(O.jsx)(Y.a,{onClick:this.onSignUpSubmit,children:"Sign Up"})]})]})});case $.Terms:return Object(O.jsx)("div",{children:Object(O.jsxs)(Le.a,{open:!0,onClose:this.props.onClose,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(O.jsx)(Ee.a,{id:"scroll-dialog-title",children:"Terms of Use"}),Object(O.jsx)(We.a,{dividers:!0,children:Object(O.jsx)(Ve.a,{id:"scroll-dialog-description",tabIndex:-1,children:"`Generic Terms of Use Please read these terms of use carefully before using service operated by PollsApp. Conditions of use By using this website, you certify that you have read and reviewed this Agreement and that you agree to comply with its terms. If you do not want to be bound by the terms of this Agreement, you are advised to leave the website accordingly. PollsApp only grants use and access of this website, its products, and its services to those who have accepted its terms. Privacy policy Before you continue using our website, we advise you to read our privacy policy [link to privacy policy] regarding our user data collection. It will help you better understand our practices. Age restriction You must be at least 18 (eighteen) years of age before you can use this website. By using this website, you warrant that you are at least 18 years of age and you may legally adhere to this Agreement. PollsApp assumes no responsibility for liabilities related to age misrepresentation. Intellectual property You agree that all materials, products, and services provided on this website are the property of PollsApp, its affiliates, directors, officers, employees, agents, suppliers, or licensors including all copyrights, trade secrets, trademarks, patents, and other intellectual property. You also agree that you will not reproduce or redistribute the PollsApp\u2019s intellectual property in any way, including electronic, digital, or new trademark registrations. You grant PollsApp a royalty-free and non-exclusive license to display, use, copy, transmit, and broadcast the content you upload and publish. For issues regarding intellectual property claims, you should contact the company in order to come to an agreement. User accounts As a user of this website, you may be asked to register with us and provide private information. You are responsible for ensuring the accuracy of this information, and you are responsible for maintaining the safety and security of your identifying information. You are also responsible for all activities that occur under your account or password. If you think there are any possible issues regarding the security of your account on the website, inform us immediately so we may address it accordingly. We reserve all rights to terminate accounts, edit or remove content and cancel orders in their sole discretion. Terms of use template by WebsitePolicies.com Applicable law By visiting this website, you agree that the laws of the [location], without regard to principles of conflict laws, will govern these terms and conditions, or any dispute of any sort that might come between PollsApp and you, or its business partners and associates. Disputes Any dispute related in any way to your visit to this website or to products you purchase from us shall be arbitrated by state or federal court [location] and you consent to exclusive jurisdiction and venue of such courts. Indemnification You agree to indemnify PollsApp and its affiliates and hold PollsApp harmless against legal claims and demands that may arise from your use or misuse of our services. We reserve the right to select our own legal counsel. Limitation on liability PollsApp is not liable for any damages that may occur to you as a result of your misuse of our website. PollsApp reserves the right to edit, modify, and change this Agreement any time. We shall let our users know of these changes through electronic mail. This Agreement is an understanding between PollsApp and the user, and this supersedes and replaces all prior agreements regarding the use of this website.`"})}),Object(O.jsxs)(ze.a,{children:[Object(O.jsx)(Y.a,{onClick:this.onTermsDecline,children:"Decline"}),Object(O.jsx)(Y.a,{onClick:this.onTermsAccept,children:"Accept"})]})]})})}}}]),n}(s.a.Component);Ye.contextType=F;var Ge=Ye,He=240,Re=Object(Pe.a)("div",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(He,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})})),_e=Object(Pe.a)("div")((function(e){var t=e.theme;return Object(Q.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(Me.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(Me.a)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(3),width:"auto"})})),qe=Object(Pe.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),$e=Object(Pe.a)(ke.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(Q.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}})),Ke=Object(Pe.a)(fe.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(He,"px)"),marginLeft:"".concat(He,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),Qe=Object(Pe.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),Xe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleDrawerOpen=function(){a.setState({isDrawerOpen:!0})},a.handleDrawerClose=function(){a.setState({isDrawerOpen:!1})},a.handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},a.handleMenuClose=function(){a.setState({anchorEl:null,mobileMoreAnchorEl:null})},a.handleMobileMenuOpen=function(e){a.setState({mobileMoreAnchorEl:e.currentTarget})},a.handleSignOut=function(){a.handleMenuClose(),a.context.signout()},a.handleSignIn=function(){a.handleMenuClose(),a.setState({authDialog:$.SignIn})},a.handleSignUp=function(){a.handleMenuClose(),a.setState({authDialog:$.SignUp})},a.handleAuthDialogClose=function(){a.setState({authDialog:null})},a.state={anchorEl:null,mobileMoreAnchorEl:null,isDrawerOpen:!1,isAuthDialogOpen:!1,authDialog:null},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=Boolean(this.state.anchorEl),n=Boolean(this.state.mobileMoreAnchorEl),a="primary-search-account-menu",s=Object(O.jsxs)(Oe.a,{anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:a,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:this.handleMenuClose,children:[Object(O.jsx)(me.a,{onClick:this.handleMenuClose,children:"Profile"},"profile"),Object(O.jsx)(me.a,{onClick:this.handleMenuClose,children:"My account"},"myAccount"),Object(O.jsx)(me.a,{onClick:this.handleSignOut,children:"Sign out"},"signOut")]}),i="primary-search-account-menu-mobile",o=Object(O.jsxs)(Oe.a,{anchorEl:this.state.mobileMoreAnchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:i,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:this.handleMobileMenuClose,children:[this.context.user&&[Object(O.jsxs)(me.a,{children:[Object(O.jsx)(Ce.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(O.jsx)(ve.a,{badgeContent:4,color:"error",children:Object(O.jsx)(ie.a,{})})}),Object(O.jsx)("p",{children:"Messages"})]},"mails"),Object(O.jsxs)(me.a,{children:[Object(O.jsx)(Ce.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",children:Object(O.jsx)(ve.a,{badgeContent:17,color:"error",children:Object(O.jsx)(be.a,{})})}),Object(O.jsx)("p",{children:"Notifications"})]},"notifications"),Object(O.jsxs)(me.a,{onClick:this.handleProfileMenuOpen,children:[Object(O.jsx)(Ce.a,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(O.jsx)(Z.a,{})}),Object(O.jsx)("p",{children:"Profile"})]},"profile")],!this.context.user&&[Object(O.jsx)(me.a,{onClick:function(){e.handleSignIn()},children:"Sign In"},"signIn"),Object(O.jsx)(me.a,{onClick:function(){e.handleSignUp()},children:"Sign Up"},"signUp")]]});return Object(O.jsxs)(I.a,{sx:{display:"flex"},children:[Object(O.jsx)(ye.a,{}),Object(O.jsxs)(Ke,{position:"fixed",open:this.state.isDrawerOpen,children:[Object(O.jsxs)(Ne.a,{children:[Object(O.jsx)(Ce.a,{color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen,edge:"start",sx:Object(u.a)({mr:2},this.state.isDrawerOpen&&{display:"none"}),children:Object(O.jsx)(re.a,{})}),Object(O.jsx)(k.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"PollsApp"}),Object(O.jsxs)(_e,{children:[Object(O.jsx)(qe,{children:Object(O.jsx)(xe.a,{})}),Object(O.jsx)($e,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]}),Object(O.jsx)(I.a,{sx:{flexGrow:1}}),Object(O.jsx)(I.a,{sx:{display:{xs:"none",md:"flex"}},children:this.context.user?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ce.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(O.jsx)(ve.a,{badgeContent:4,color:"error",children:Object(O.jsx)(ie.a,{})})}),Object(O.jsx)(Ce.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",children:Object(O.jsx)(ve.a,{badgeContent:17,color:"error",children:Object(O.jsx)(be.a,{})})}),Object(O.jsx)(Ce.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":a,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit",children:Object(O.jsx)(Z.a,{})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Y.a,{variant:"contained",disableElevation:!0,onClick:function(){e.handleSignUp()},children:Object(O.jsx)(k.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"Sign Up"})}),Object(O.jsx)(Y.a,{variant:"contained",disableElevation:!0,onClick:function(){e.handleSignIn()},children:Object(O.jsx)(k.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"Sign In"})})]})}),Object(O.jsx)(I.a,{sx:{display:{xs:"flex",md:"none"}},children:Object(O.jsx)(Ce.a,{size:"large","aria-label":"show more","aria-controls":i,"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit",children:Object(O.jsx)(le.a,{})})})]}),o,s]}),Object(O.jsxs)(we.a,{sx:{width:He,flexShrink:0,"& .MuiDrawer-paper":{width:He,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:this.state.isDrawerOpen,children:[Object(O.jsx)(Qe,{children:Object(O.jsx)(Ce.a,{onClick:this.handleDrawerClose,children:this.props.theme&&"ltr"===this.props.theme.direction?Object(O.jsx)(te.a,{}):Object(O.jsx)(ae.a,{})})}),Object(O.jsx)(S.a,{}),Object(O.jsxs)(Se.a,{children:[Object(O.jsx)(x.b,{to:"/",style:{textDecoration:"none"},children:Object(O.jsxs)(Ie.a,{button:!0,children:[Object(O.jsx)(Ae.a,{children:Object(O.jsx)(he.a,{})}),Object(O.jsx)(Te.a,{primary:"Home"})]},"home")}),Object(O.jsx)(x.b,{to:"/polls",style:{textDecoration:"none"},children:Object(O.jsxs)(Ie.a,{button:!0,children:[Object(O.jsx)(Ae.a,{children:Object(O.jsx)(Ue.a,{})}),Object(O.jsx)(Te.a,{primary:"Polls"})]},"polls")}),["Inbox","Starred","Send email","Drafts"].map((function(e,t){return Object(O.jsxs)(Ie.a,{button:!0,children:[Object(O.jsx)(Ae.a,{children:t%2===0?Object(O.jsx)(je.a,{}):Object(O.jsx)(ie.a,{})}),Object(O.jsx)(Te.a,{primary:e})]},e)}))]}),Object(O.jsx)(S.a,{}),Object(O.jsx)(Se.a,{children:["All mail","Trash","Spam"].map((function(e,t){return Object(O.jsxs)(Ie.a,{button:!0,children:[Object(O.jsx)(Ae.a,{children:t%2===0?Object(O.jsx)(je.a,{}):Object(O.jsx)(ie.a,{})}),Object(O.jsx)(Te.a,{primary:e})]},e)}))})]}),Object(O.jsxs)(Re,{open:this.state.isDrawerOpen,children:[Object(O.jsx)(Qe,{}),null!==this.state.authDialog&&Object(O.jsx)(Ge,{mode:this.state.authDialog,onClose:this.handleAuthDialogClose})]})]})}}]),n}(a.Component);Xe.contextType=F;var Ze=Object(Be.a)(Xe),et=(n(220),n(318)),tt=n(294),nt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return Object(O.jsx)(y.a,{sx:{backgroundColor:function(e){return e.palette.background.default},margin:0,height:"calc(100vh - 64px)"},children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[Object(O.jsx)(k.a,{variant:"h4",children:"404"}),Object(O.jsx)(k.a,{variant:"subtitle1",children:Object(O.jsx)("span",{children:"Page Not Found"})}),Object(O.jsx)(x.b,{to:"/",children:Object(O.jsx)(tt.a,{})})]})})}}]),n}(s.a.Component),at=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).addOption=function(){var e=a.state.options;e.push(""),a.setState(e)},a.create=Object(b.a)(p.a.mark((function e(){var t,n,s,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/json"},(n=localStorage.getItem("user"))&&(s=JSON.parse(n).access_token,t.Authorization="Bearer ".concat(s)),e.next=5,fetch("http://localhost:3000/api/polls",{method:"POST",headers:t,body:JSON.stringify({name:a.state.name,options:a.state.options})});case 5:if(!(i=e.sent).ok){e.next=14;break}return e.next=9,i.json();case 9:o=e.sent,console.log("polls"),console.log(o),e.next=15;break;case 14:alert("poll create error: "+i.status);case 15:case"end":return e.stop()}}),e)}))),a.removeOption=function(){var e=a.state.options;e.length<=2||(e.splice(-1),a.setState(e))},a.state={options:["",""],name:""},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state.options.map((function(t,n){return Object(O.jsx)(Fe.a,{autoFocus:!0,margin:"dense",id:"option-".concat(n),label:"Option ".concat(n),onChange:function(t){var a=e.state.options;a[n]=t.target.value,e.setState(a)},value:t,type:"text",variant:"outlined"})}));return Object(O.jsx)("main",{children:Object(O.jsxs)("div",{className:"NewPoll",children:[Object(O.jsx)("h1",{children:"Create new poll."}),Object(O.jsxs)(w.a,{"aria-label":"breadcrumb",children:[Object(O.jsx)(x.b,{color:"inherit",to:"/polls",children:"Polls"}),Object(O.jsx)(k.a,{color:"text.primary",children:"Create new poll"})]}),Object(O.jsx)(y.a,{elevation:3,children:Object(O.jsxs)(N.a,{children:[Object(O.jsx)(Fe.a,{autoFocus:!0,margin:"dense",id:"poll-name",label:"Poll name",type:"text",onChange:function(t){e.setState({name:t.target.value})},variant:"outlined"}),t,Object(O.jsx)(Y.a,{variant:"contained",color:"secondary",onClick:this.addOption,children:"Add option"}),Object(O.jsx)(Y.a,{variant:"contained",color:"secondary",onClick:this.removeOption,children:"Remove option"}),Object(O.jsx)(Y.a,{variant:"contained",color:"primary",onClick:this.create,children:"Create"})]})})]})})}}]),n}(s.a.Component);function st(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("main",{children:[Object(O.jsx)("h2",{children:"Welcome to the homepage!"}),Object(O.jsx)("p",{children:"You can do this, I believe in you."})]}),Object(O.jsx)("nav",{children:Object(O.jsx)(x.b,{to:"/about",children:"About"})})]})}function it(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("main",{children:[Object(O.jsx)("h2",{children:"Who are we?"}),Object(O.jsx)("p",{children:"That feels like an existential question, don't you think?"})]}),Object(O.jsx)("nav",{children:Object(O.jsx)(x.b,{to:"/",children:"Home"})})]})}function ot(){return Object(O.jsxs)(k.a,{variant:"body2",color:"text.secondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(x.b,{color:"inherit",to:"/",children:"PollsApp"})," ",(new Date).getFullYear(),"."]})}var rt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).signin=function(e){a.setState({user:{login:e}})},a.signout=function(){a.setState({user:null}),localStorage.clear()};var s=localStorage.getItem("user"),i=localStorage.getItem("username");return a.state={user:i&&s?{login:i}:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("user"),t=localStorage.getItem("username");e&&t&&this.signin(t)}},{key:"render",value:function(){return Object(O.jsx)(F.Provider,{value:{user:this.state.user,signin:this.signin,signout:this.signout},children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("header",{className:"App-header",children:Object(O.jsx)(Ze,{})}),Object(O.jsx)(et.a,{maxWidth:"md",children:Object(O.jsx)(I.a,{sx:{minHeight:500},children:Object(O.jsxs)(g.d,{children:[Object(O.jsx)(g.b,{path:"/",element:Object(O.jsx)(st,{})}),Object(O.jsx)(g.b,{path:"about",element:Object(O.jsx)(it,{})}),Object(O.jsx)(g.b,{path:"/polls",element:Object(O.jsx)(K,{})}),Object(O.jsx)(g.b,{path:"/polls/new",element:Object(O.jsx)(at,{})}),Object(O.jsx)(g.b,{path:"/polls/:id",element:Object(O.jsx)(E,{})}),Object(O.jsx)(g.b,{path:"/404",element:Object(O.jsx)(nt,{})})]})})}),Object(O.jsx)("footer",{children:Object(O.jsx)(ot,{})})]})})}}]),n}(s.a.Component),ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,320)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))},lt=n(301),dt=n(165),ht=Object(dt.a)({status:{}});o.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(x.a,{children:Object(O.jsx)(lt.a,{theme:ht,children:Object(O.jsx)(H.a,{children:Object(O.jsx)(rt,{})})})})}),document.getElementById("root")),ct()}},[[221,1,2]]]);
//# sourceMappingURL=main.0b97763f.chunk.js.map